<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pixel Survival: Wasteland</title>
    <style>
        /* [Previous CSS styles remain the same] */
        
        .language-selector {
            margin: 15px 0;
            padding: 10px;
            background-color: #333;
            border-radius: 4px;
        }
        
        .language-option {
            display: inline-block;
            margin: 5px;
            padding: 8px 12px;
            background-color: #444;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .language-option.selected {
            background-color: #4CAF50;
        }
        
        .emoji {
            font-size: 1.2em;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <!-- [Previous HTML structure remains the same until settings panel] -->
    
    <div id="settings" class="tabContent">
        <h3>Settings ‚öôÔ∏è</h3>
        
        <div class="language-selector">
            <h4>Language üåê</h4>
            <div class="language-option selected" data-lang="en">English</div>
            <div class="language-option" data-lang="es">Espa√±ol</div>
            <div class="language-option" data-lang="fr">Fran√ßais</div>
            <div class="language-option" data-lang="de">Deutsch</div>
        </div>
        
        <div class="toggle-container">
            <span class="toggle-label">Data Saver üíæ</span>
            <label class="toggle-switch">
                <input type="checkbox" id="dataSaverToggle" checked>
                <span class="slider"></span>
            </label>
        </div>
        <div class="toggle-container">
            <span class="toggle-label">Low Graphics üñ•Ô∏è</span>
            <label class="toggle-switch">
                <input type="checkbox" id="lowGraphicsToggle">
                <span class="slider"></span>
            </label>
        </div>
        <div class="toggle-container">
            <span class="toggle-label">Animations üé¨</span>
            <label class="toggle-switch">
                <input type="checkbox" id="animationsToggle" checked>
                <span class="slider"></span>
            </label>
        </div>
        <button class="btn" id="resetBtn">Reset Game üîÑ</button>
    </div>

    <script>
        // Language Translations
        const translations = {
            en: {
                title: "Pixel Survival: Wasteland",
                tabs: ["Actions", "Inventory", "Crafting", "Settings"],
                stats: ["Day", "Health", "Hunger", "Water"],
                actions: ["Chop Wood", "Drink Water", "Rest", "Explore", "Mine Stone", "Forage Food", "Eat Food"],
                inventory: "Inventory",
                crafting: "Crafting Recipes",
                settings: "Settings",
                welcome: "Welcome to Pixel Survival! Gather resources to stay alive.",
                chopWood: "Chopped wood! +{0} wood üå≤",
                mineStone: "Mined stone! +{0} stone ‚õèÔ∏è",
                forage: "Foraged food! +{0} food üçé",
                drink: "Drank water! +20 water üíß",
                notThirsty: "Not thirsty right now üö±",
                eat: "Ate food! +25 hunger üçó",
                noFood: "No food in inventory üö´",
                rest: "Rested! +{0} health üò¥",
                exploreEvents: [
                    "Found a berry bush! +2 food ü´ê",
                    "Discovered a small pond! +20 water üåä",
                    "Got attacked by a wild animal! -15 health üê∫",
                    "Found an abandoned campsite! +3 wood, +2 stone üèïÔ∏è",
                    "Found nothing interesting üòê"
                ],
                unlockPickaxe: "New recipe unlocked: Stone Pickaxe! ‚õèÔ∏è",
                cantCraft: "Can't craft {0}! Missing: {1} ‚ùå",
                usedItem: "Used {0} {1}",
                createdItem: "Created {0} {1}! ‚úÖ",
                dataSaver: ["Data saver enabled", "Data saver disabled"],
                lowGraphics: ["Low graphics enabled", "Low graphics disabled"],
                animations: ["Animations enabled", "Animations disabled"],
                resetConfirm: "Are you sure you want to reset your game? All progress will be lost! ‚ö†Ô∏è",
                gameOver: "GAME OVER! You didn't survive the wasteland. üíÄ",
                resetGame: "Resetting game... üîÑ",
                loaded: "Game loaded üìÇ",
                saveFailed: "Failed to save progress ‚ùå",
                loadFailed: "Failed to load saved game ‚ùå",
                starving: "You're starving or dehydrated! ü•µ"
            },
            es: {
                title: "Supervivencia Pixel: Tierra Bald√≠a",
                tabs: ["Acciones", "Inventario", "Creaci√≥n", "Ajustes"],
                stats: ["D√≠a", "Salud", "Hambre", "Agua"],
                actions: ["Talad Madera", "Beber Agua", "Descansar", "Explorar", "Minar Piedra", "Buscar Comida", "Comer"],
                inventory: "Inventario",
                crafting: "Recetas de Creaci√≥n",
                settings: "Ajustes",
                welcome: "¬°Bienvenido a Supervivencia Pixel! Recolecta recursos para mantenerte con vida.",
                chopWood: "¬°Talaste madera! +{0} madera üå≤",
                mineStone: "¬°Minaste piedra! +{0} piedra ‚õèÔ∏è",
                forage: "¬°Encontraste comida! +{0} comida üçé",
                drink: "¬°Bebiste agua! +20 agua üíß",
                notThirsty: "No tienes sed ahora üö±",
                eat: "¬°Comiste! +25 hambre üçó",
                noFood: "No hay comida en el inventario üö´",
                rest: "¬°Descansaste! +{0} salud üò¥",
                exploreEvents: [
                    "¬°Encontraste arbustos de bayas! +2 comida ü´ê",
                    "¬°Descubriste un peque√±o estanque! +20 agua üåä",
                    "¬°Te atac√≥ un animal salvaje! -15 salud üê∫",
                    "¬°Encontraste un campamento abandonado! +3 madera, +2 piedra üèïÔ∏è",
                    "No encontraste nada interesante üòê"
                ],
                unlockPickaxe: "¬°Nueva receta desbloqueada: Pico de piedra! ‚õèÔ∏è",
                cantCraft: "¬°No puedes crear {0}! Faltan: {1} ‚ùå",
                usedItem: "Usaste {0} {1}",
                createdItem: "¬°Creaste {0} {1}! ‚úÖ",
                dataSaver: ["Ahorro de datos activado", "Ahorro de datos desactivado"],
                lowGraphics: ["Gr√°ficos bajos activados", "Gr√°ficos bajos desactivados"],
                animations: ["Animaciones activadas", "Animaciones desactivadas"],
                resetConfirm: "¬øSeguro que quieres reiniciar el juego? ¬°Todo el progreso se perder√°! ‚ö†Ô∏è",
                gameOver: "¬°FIN DEL JUEGO! No sobreviviste a la tierra bald√≠a. üíÄ",
                resetGame: "Reiniciando juego... üîÑ",
                loaded: "Juego cargado üìÇ",
                saveFailed: "Error al guardar progreso ‚ùå",
                loadFailed: "Error al cargar partida guardada ‚ùå",
                starving: "¬°Tienes hambre o est√°s deshidratado! ü•µ"
            },
            fr: {
                title: "Survie Pixel: Terres D√©sol√©es",
                tabs: ["Actions", "Inventaire", "Artisanat", "Param√®tres"],
                stats: ["Jour", "Sant√©", "Faim", "Eau"],
                actions: ["Couper du Bois", "Boire de l'Eau", "Se Reposer", "Explorer", "Miner de la Pierre", "Chercher de la Nourriture", "Manger"],
                inventory: "Inventaire",
                crafting: "Recettes d'Artisanat",
                settings: "Param√®tres",
                welcome: "Bienvenue dans Survie Pixel! Collectez des ressources pour rester en vie.",
                chopWood: "Bois coup√©! +{0} bois üå≤",
                mineStone: "Pierre min√©e! +{0} pierre ‚õèÔ∏è",
                forage: "Nourriture trouv√©e! +{0} nourriture üçé",
                drink: "Eau bue! +20 eau üíß",
                notThirsty: "Pas soif maintenant üö±",
                eat: "Mang√©! +25 faim üçó",
                noFood: "Pas de nourriture dans l'inventaire üö´",
                rest: "Repos√©! +{0} sant√© üò¥",
                exploreEvents: [
                    "Trouv√© des baies! +2 nourriture ü´ê",
                    "D√©couvert un √©tang! +20 eau üåä",
                    "Attaqu√© par un animal sauvage! -15 sant√© üê∫",
                    "Trouv√© un camp abandonn√©! +3 bois, +2 pierre üèïÔ∏è",
                    "Rien trouv√© d'int√©ressant üòê"
                ],
                unlockPickaxe: "Nouvelle recette d√©bloqu√©e: Pioche en pierre! ‚õèÔ∏è",
                cantCraft: "Impossible de cr√©er {0}! Manque: {1} ‚ùå",
                usedItem: "Utilis√© {0} {1}",
                createdItem: "{0} {1} cr√©√©(s)! ‚úÖ",
                dataSaver: ["√âconomie de donn√©es activ√©e", "√âconomie de donn√©es d√©sactiv√©e"],
                lowGraphics: ["Graphismes bas activ√©s", "Graphismes bas d√©sactiv√©s"],
                animations: ["Animations activ√©es", "Animations d√©sactiv√©es"],
                resetConfirm: "√ätes-vous s√ªr de vouloir r√©initialiser le jeu? Toute progression sera perdue! ‚ö†Ô∏è",
                gameOver: "GAME OVER! Vous n'avez pas surv√©cu aux terres d√©sol√©es. üíÄ",
                resetGame: "R√©initialisation du jeu... üîÑ",
                loaded: "Jeu charg√© üìÇ",
                saveFailed: "√âchec de sauvegarde ‚ùå",
                loadFailed: "√âchec de chargement ‚ùå",
                starving: "Vous mourrez de faim ou de soif! ü•µ"
            },
            de: {
                title: "Pixel √úberleben: √ñdland",
                tabs: ["Aktionen", "Inventar", "Herstellung", "Einstellungen"],
                stats: ["Tag", "Gesundheit", "Hunger", "Wasser"],
                actions: ["Holz hacken", "Wasser trinken", "Ausruhen", "Erkunden", "Stein abbauen", "Nahrung suchen", "Essen"],
                inventory: "Inventar",
                crafting: "Rezepte",
                settings: "Einstellungen",
                welcome: "Willkommen bei Pixel √úberleben! Sammle Ressourcen um zu √ºberleben.",
                chopWood: "Holz gehackt! +{0} Holz üå≤",
                mineStone: "Stein abgebaut! +{0} Stein ‚õèÔ∏è",
                forage: "Nahrung gefunden! +{0} Nahrung üçé",
                drink: "Wasser getrunken! +20 Wasser üíß",
                notThirsty: "Jetzt nicht durstig üö±",
                eat: "Gegessen! +25 Hunger üçó",
                noFood: "Keine Nahrung im Inventar üö´",
                rest: "Ausgeruht! +{0} Gesundheit üò¥",
                exploreEvents: [
                    "Beerenstrauch gefunden! +2 Nahrung ü´ê",
                    "Kleiner Teich entdeckt! +20 Wasser üåä",
                    "Von einem wilden Tier angegriffen! -15 Gesundheit üê∫",
                    "Verlassenes Lager gefunden! +3 Holz, +2 Stein üèïÔ∏è",
                    "Nichts Interessantes gefunden üòê"
                ],
                unlockPickaxe: "Neues Rezept freigeschaltet: Steinspitzhacke! ‚õèÔ∏è",
                cantCraft: "{0} kann nicht hergestellt werden! Fehlt: {1} ‚ùå",
                usedItem: "{0} {1} verbraucht",
                createdItem: "{0} {1} hergestellt! ‚úÖ",
                dataSaver: ["Datensparmodus aktiviert", "Datensparmodus deaktiviert"],
                lowGraphics: ["Einfache Grafik aktiviert", "Einfache Grafik deaktiviert"],
                animations: ["Animationen aktiviert", "Animationen deaktiviert"],
                resetConfirm: "Sind Sie sicher, dass Sie das Spiel zur√ºcksetzen m√∂chten? Alle Fortschritte gehen verloren! ‚ö†Ô∏è",
                gameOver: "GAME OVER! Sie haben das √ñdland nicht √ºberlebt. üíÄ",
                resetGame: "Spiel wird zur√ºckgesetzt... üîÑ",
                loaded: "Spiel geladen üìÇ",
                saveFailed: "Speichern fehlgeschlagen ‚ùå",
                loadFailed: "Laden fehlgeschlagen ‚ùå",
                starving: "Sie verhungern oder verdursten! ü•µ"
            }
        };

        // Game State with language
        const gameState = {
            health: 100,
            hunger: 100,
            water: 100,
            day: 1,
            inventory: {
                wood: 0,
                stone: 0,
                food: 0,
                rope: 0,
                axe: 0,
                pickaxe: 0,
                campfire: 0
            },
            settings: {
                dataSaver: true,
                lowGraphics: false,
                animations: true,
                language: 'en'
            },
            unlockedRecipes: ['axe', 'campfire']
        };

        // [Previous craftingRecipes definition remains the same]

        // Initialize with language support
        function init() {
            loadGame();
            applyLanguage();
            updateUI();
            renderInventory();
            renderCraftingRecipes();
            
            // Set up event listeners
            document.getElementById('chopWoodBtn').addEventListener('click', chopWood);
            document.getElementById('drinkBtn').addEventListener('click', drink);
            document.getElementById('restBtn').addEventListener('click', rest);
            document.getElementById('exploreBtn').addEventListener('click', explore);
            document.getElementById('mineStoneBtn').addEventListener('click', mineStone);
            document.getElementById('forageBtn').addEventListener('click', forage);
            document.getElementById('eatBtn').addEventListener('click', eat);
            document.getElementById('resetBtn').addEventListener('click', resetGame);
            
            document.getElementById('dataSaverToggle').addEventListener('change', toggleDataSaver);
            document.getElementById('lowGraphicsToggle').addEventListener('change', toggleLowGraphics);
            document.getElementById('animationsToggle').addEventListener('change', toggleAnimations);
            
            // Language selector
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.language-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                    gameState.settings.language = option.dataset.lang;
                    applyLanguage();
                    saveGame();
                });
            });
            
            // Set initial toggle states
            document.getElementById('dataSaverToggle').checked = gameState.settings.dataSaver;
            document.getElementById('lowGraphicsToggle').checked = gameState.settings.lowGraphics;
            document.getElementById('animationsToggle').checked = gameState.settings.animations;
            
            // Set initial language
            document.querySelector(`.language-option[data-lang="${gameState.settings.language}"]`).classList.add('selected');
            
            // Tab switching
            elements.tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });
            
            // Start game loop
            setInterval(gameLoop, 10000);
        }

        // Apply current language to UI
        function applyLanguage() {
            const lang = gameState.settings.language;
            const t = translations[lang];
            
            // Update title
            document.title = t.title;
            
            // Update tabs
            document.querySelectorAll('.tab').forEach((tab, i) => {
                tab.textContent = t.tabs[i];
            });
            
            // Update stats labels
            document.querySelectorAll('.stat').forEach((stat, i) => {
                stat.textContent = t.stats[i] + ': ' + stat.querySelector('span').textContent;
            });
            
            // Update action buttons
            document.getElementById('chopWoodBtn').textContent = t.actions[0];
            document.getElementById('drinkBtn').textContent = t.actions[1];
            document.getElementById('restBtn').textContent = t.actions[2];
            document.getElementById('exploreBtn').textContent = t.actions[3];
            document.getElementById('mineStoneBtn').textContent = t.actions[4];
            document.getElementById('forageBtn').textContent = t.actions[5];
            document.getElementById('eatBtn').textContent = t.actions[6];
            
            // Update headings
            document.querySelector('#inventory h3').textContent = t.inventory;
            document.querySelector('#crafting h3').textContent = t.crafting;
            document.querySelector('#settings h3').textContent = t.settings + ' ‚öôÔ∏è';
            
            // Update settings labels
            document.querySelector('.toggle-label[for="dataSaverToggle"]').textContent = t.dataSaver[0].split(' ')[0] + ' üíæ';
            document.querySelector('.toggle-label[for="lowGraphicsToggle"]').textContent = t.lowGraphics[0].split(' ')[0] + ' üñ•Ô∏è';
            document.querySelector('.toggle-label[for="animationsToggle"]').textContent = t.animations[0].split(' ')[0] + ' üé¨';
            document.getElementById('resetBtn').textContent = t.resetGame.split(' ')[0] + ' üîÑ';
            
            // Update welcome message if it's still the default
            if (elements.gameLog.children.length === 1 && elements.gameLog.children[0].textContent.includes("Welcome")) {
                elements.gameLog.innerHTML = '';
                addToLog(t.welcome);
            }
        }

        // [Previous gameLoop function remains the same]

        // Enhanced Game Actions with Emojis
        function chopWood() {
            const t = translations[gameState.settings.language];
            const efficiency = gameState.inventory.axe > 0 ? 2 : 1;
            const woodGained = Math.floor(Math.random() * 3 * efficiency) + 1;
            gameState.inventory.wood += woodGained;
            gameState.hunger = Math.max(0, gameState.hunger - 2);
            addToLog(t.chopWood.replace('{0}', woodGained));
            updateUI();
            saveGame();
        }

        function mineStone() {
            const t = translations[gameState.settings.language];
            const efficiency = gameState.inventory.pickaxe > 0 ? 2 : 1;
            const stoneGained = Math.floor(Math.random() * 3 * efficiency) + 1;
            gameState.inventory.stone += stoneGained;
            gameState.hunger = Math.max(0, gameState.hunger - 3);
            addToLog(t.mineStone.replace('{0}', stoneGained));
            updateUI();
            saveGame();
        }

        function forage() {
            const t = translations[gameState.settings.language];
            const foodGained = Math.floor(Math.random() * 3) + 1;
            gameState.inventory.food += foodGained;
            addToLog(t.forage.replace('{0}', foodGained));
            updateUI();
            saveGame();
        }

        function drink() {
            const t = translations[gameState.settings.language];
            if (gameState.water < 80) {
                gameState.water = Math.min(100, gameState.water + 20);
                addToLog(t.drink);
                updateUI();
                saveGame();
            } else {
                addToLog(t.notThirsty);
            }
        }

        function eat() {
            const t = translations[gameState.settings.language];
            if (gameState.inventory.food > 0) {
                gameState.inventory.food--;
                gameState.hunger = Math.min(100, gameState.hunger + 25);
                addToLog(t.eat);
                updateUI();
                saveGame();
            } else {
                addToLog(t.noFood);
            }
        }

        function rest() {
            const t = translations[gameState.settings.language];
            const bonus = gameState.inventory.campfire > 0 ? 25 : 15;
            gameState.health = Math.min(100, gameState.health + bonus);
            addToLog(t.rest.replace('{0}', bonus));
            updateUI();
            saveGame();
        }

        function explore() {
            const t = translations[gameState.settings.language];
            const randomIndex = Math.floor(Math.random() * t.exploreEvents.length);
            const eventText = t.exploreEvents[randomIndex];
            
            // Execute corresponding effect
            const effects = [
                () => gameState.inventory.food += 2,
                () => gameState.water = Math.min(100, gameState.water + 20),
                () => gameState.health = Math.max(0, gameState.health - 15),
                () => {
                    gameState.inventory.wood += 3;
                    gameState.inventory.stone += 2;
                },
                () => {}
            ];
            
            effects[randomIndex]();
            addToLog(eventText);
            updateUI();
            saveGame();
        }

        // Enhanced Crafting System with Language Support
        function craftItem(recipeName) {
            const t = translations[gameState.settings.language];
            const recipe = craftingRecipes[recipeName];
            let missingIngredients = [];
            
            // Check ingredients
            for (const [item, amount] of Object.entries(recipe.ingredients)) {
                if (gameState.inventory[item] < amount) {
                    missingIngredients.push(`${amount} ${item}`);
                }
            }

            if (missingIngredients.length > 0) {
                const warningEntry = document.createElement('div');
                warningEntry.className = 'warning';
                warningEntry.textContent = t.cantCraft
                    .replace('{0}', recipe.name)
                    .replace('{1}', missingIngredients.join(', '));
                elements.gameLog.insertBefore(warningEntry, elements.gameLog.firstChild);
                
                if (elements.gameLog.children.length > 20) {
                    elements.gameLog.removeChild(elements.gameLog.lastChild);
                }
                return;
            }

            // Deduct ingredients
            for (const [item, amount] of Object.entries(recipe.ingredients)) {
                gameState.inventory[item] -= amount;
                addToLog(t.usedItem.replace('{0}', amount).replace('{1}', item));
            }
            
            // Add results
            for (const [item, amount] of Object.entries(recipe.result)) {
                gameState.inventory[item] += amount;
                addToLog(t.createdItem.replace('{0}', amount).replace('{1}', item));
            }

            // Unlock pickaxe if crafting axe
            if (recipeName === 'axe' && !gameState.unlockedRecipes.includes('pickaxe')) {
                gameState.unlockedRecipes.push('pickaxe');
                addToLog(t.unlockPickaxe);
            }

            updateUI();
            renderInventory();
            renderCraftingRecipes();
            saveGame();
        }

        // [Previous UI functions remain the same with added emojis]

        function gameOver() {
            const t = translations[gameState.settings.language];
            addToLog(t.gameOver);
            addToLog(t.resetGame);
            
            // Reset state but keep settings and unlocked recipes
            const settings = {
                settings: gameState.settings,
                unlockedRecipes: gameState.unlockedRecipes
            };
            
            Object.assign(gameState, {
                health: 100,
                hunger: 100,
                water: 100,
                day: 1,
                inventory: {
                    wood: 0,
                    stone: 0,
                    food: 0,
                    rope: 0,
                    axe: 0,
                    pickaxe: 0,
                    campfire: 0
                }
            });
            
            Object.assign(gameState, settings);
            updateUI();
            renderInventory();
            saveGame();
        }

        // [Remaining functions (updateUI, renderInventory, renderCraftingRecipes, etc.) remain the same]

        // Start the game
        window.onload = init;
    </script>
</body>
</html>
